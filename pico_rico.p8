pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

-- imports

#include ./lib/constants.p8

#include ./build/levels/test.p8
#include ./lib/level_index.p8

#include ./lib/library.p8
#include ./lib/math.p8
#include ./lib/bezier.p8
#include ./lib/drawing.p8
#include ./lib/serialization.p8
#include ./lib/rico.p8
#include ./lib/rico_bulb.p8
#include ./lib/gameplay.p8
#include ./lib/levels.p8
#include ./lib/main_menu.p8

-->8
-- root hooks

draw_map = {
  draw_main_menu,
  draw_loading_level,
  draw_level,
}

update_map = {
  update_main_menu,
  update_loading_level,
  update_level,
}

last_update_mode = 0

function _draw()
  if last_update_mode ~= game_mode then
    return
  end

  draw_map[game_mode]()
end

function _update()
  update_map[game_mode]()
  last_update_mode = game_mode
end

__gfx__
00000000009009000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700099999900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000999999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000099339900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
